<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record model="ir.module.category" id="module_category_school_management">
        <field name="name">School Management</field>
        <field name="sequence">19</field>
    </record>
    
    <record id="module_school_user" model="ir.module.category">
        <field name="name">School Management</field>
        <field name="sequence">21</field>
        <field name="parent_id" ref="module_category_school_management"/>
    </record>

    <record id="group_student_user" model="res.groups">
        <field name="name">Student</field>
        <field name="category_id" ref="module_school_user"/>
    </record>

    <record id="group_sport_user" model="res.groups">
        <field name="name">Sports</field>
        <field name="category_id" ref="module_school_user"/>
        <field name="implied_ids" eval="[(4, ref('group_student_user'))]"/>
    </record>

    <record id="group_participants_user" model="res.groups">
        <field name="name">Participants</field>
        <field name="category_id" ref="module_school_user"/>
        <field name="implied_ids" eval="[(4, ref('group_sport_user'))]"/>
    </record>

    <record id="group_teacher_user" model="res.groups">
        <field name="name">Teacher</field>
        <field name="category_id" ref="module_school_user"/>
        <field name="implied_ids" eval="[(4, ref('group_participants_user'))]"/>
    </record>

    <!-- <record id="student_read_only_record" model="ir.rule"> 
        <field name="name">Student read only records</field> 
        <field name="model_id" ref="model_student_info"/> 
        <field name="groups" eval="[(4, ref ('group_student_user'))]"/> 
        <field name="perm_read" eval="True"/> 
        <field name="perm_write" eval="False"/> 
        <field name="perm_create" eval="False"/> 
        <field name="perm_unlink" eval="False"/> 
        <field name="domain_force">[('state', 'in', ['confirm'])]</field> 
    </record> -->

    <record id="user_visible_own_records" model="ir.rule">
        <field name="name">user.visible.own.record</field>
        <field name="model_id" ref="model_student_info"/>
        <field name="domain_force">[('user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('school_management.group_student_user'))]"/>
    </record>

    <record id="user_visible_teacher" model="ir.rule">
        <field name="name">user.visible.own.record</field>
        <field name="model_id" ref="model_student_info"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('school_management.group_teacher_user'))]"/>
    </record>

</odoo>    
